# 智能文献处理系统 - 系统架构

本文档描述了智能文献处理系统的架构设计。

## 系统概述

智能文献处理系统是一个基于大语言模型(LLM)的智能文献处理平台，集检索与综述分析于一体，旨在提升学术阅读与研究效率。系统由两个核心模块组成：文献检索模块和多文献对比综述模块。

## 系统架构图

```
前端 (HTML/CSS/JS) <--> FastAPI后端
                         |
                         ├── 文献检索模块
                         |   ├── 搜索论文 (PaperAgent)
                         |   └── 扩展引文 (引文扩展)
                         |
                         └── 对比综述模块
                             ├── 处理PDF (MinerU)
                             ├── 提取要素 (KeyElementExtractor)
                             └── 生成综述 (ReviewGenerator/ReviewSynthesizer)
```

## 技术栈

- **前端**: HTML, CSS, JavaScript, Bootstrap
- **后端**: FastAPI, Python
- **核心技术**: 大语言模型 (LLM), PDF处理, 文本分析

## 模块详解

### 1. 文献检索模块

文献检索模块负责根据用户查询搜索相关论文，并支持引文网络扩展。

#### 1.1 组件

- **PaperAgent**: 负责处理用户查询，生成搜索关键词，并调用搜索API获取论文。
- **引文扩展**: 负责扩展论文的引文网络，深入挖掘相关文献。

#### 1.2 工作流程

1. 用户提交查询
2. PaperAgent分析查询，生成多个搜索关键词
3. 系统使用搜索API获取论文
4. 系统对论文进行相关性排序
5. 如果用户选择扩展引文，系统会获取论文的引用文献，并进一步分析

### 2. 多文献对比综述模块

多文献对比综述模块负责分析多篇论文，生成对比综述。

#### 2.1 组件

- **MinerU**: 负责处理PDF文件，提取文本内容。
- **KeyElementExtractor**: 负责从论文中提取关键要素，如方法、结果、结论等。
- **ReviewGenerator/ReviewSynthesizer**: 负责生成对比综述。

#### 2.2 工作流程

1. 用户选择或上传论文
2. MinerU处理PDF文件，提取文本内容
3. KeyElementExtractor从文本中提取关键要素
4. ReviewGenerator/ReviewSynthesizer生成对比综述
5. 系统返回综述结果

## 系统组件

### 1. 前端

前端使用HTML, CSS和JavaScript构建，采用Bootstrap框架实现响应式设计。主要功能包括：

- 搜索界面：允许用户输入查询，显示搜索结果
- 文献选择：允许用户选择感兴趣的论文
- 文件上传：允许用户上传PDF文件
- 综述生成：显示生成的对比综述

### 2. 后端

后端使用FastAPI框架构建，采用Python语言开发。主要组件包括：

#### 2.1 路由器 (Routers)

- **search.py**: 处理文献检索相关的API请求
- **review.py**: 处理对比综述相关的API请求
- **utils.py**: 处理工具类API请求

#### 2.2 服务 (Services)

- **search_service.py**: 实现文献检索相关的业务逻辑
- **review_service.py**: 实现对比综述相关的业务逻辑
- **pdf_service.py**: 实现PDF处理相关的业务逻辑

#### 2.3 核心模块

- **agent.py**: 实现基于LLM的代理
- **paper_agent.py**: 实现论文搜索代理
- **paper_node.py**: 实现论文节点数据结构
- **expand_paper.py**: 实现引文扩展功能
- **search_from_google.py**: 实现Google搜索功能

#### 2.4 对比综述模块

- **MinerU.py**: 实现PDF处理功能
- **KeyElementExtractor.py**: 实现关键要素提取功能
- **ReviewGenerator.py**: 实现综述生成功能
- **ReviewSynthesizer.py**: 实现综述合成功能

## 数据流

### 1. 文献检索流程

```
用户查询 -> PaperAgent -> 生成搜索关键词 -> 搜索API -> 论文数据 -> 相关性排序 -> 返回结果
                                                      |
                                                      v
                                                  引文扩展 -> 更多论文数据
```

### 2. 对比综述流程

```
选择论文 -> 下载PDF -> MinerU处理 -> 提取文本 -> KeyElementExtractor -> 提取关键要素 -> ReviewGenerator -> 生成综述
   |
   v
上传PDF
```

## 部署架构

系统采用简单的单体架构部署，所有组件运行在同一个进程中。

```
用户 <-> Web服务器 <-> FastAPI应用 <-> 外部API (OpenAI, Google, arXiv)
                         |
                         v
                     文件系统 (PDF, 结果)
```

## 扩展性设计

系统采用模块化设计，便于扩展和维护：

1. **路由器分离**: 不同功能的API路由分离，便于独立开发和测试
2. **服务层抽象**: 业务逻辑封装在服务层，与路由层分离
3. **可配置的模型**: 支持通过环境变量配置不同的LLM模型
4. **可扩展的搜索源**: 可以添加更多的搜索源，如IEEE Xplore, ACM Digital Library等

## 安全性考虑

1. **API密钥保护**: 使用环境变量存储API密钥，避免硬编码
2. **输入验证**: 使用Pydantic模型验证API输入
3. **错误处理**: 统一的错误处理机制，避免敏感信息泄露
4. **文件上传限制**: 限制上传文件的类型和大小

## 性能优化

1. **异步处理**: 使用FastAPI的异步特性处理请求
2. **后台任务**: 使用后台任务处理耗时操作，如PDF处理和综述生成
3. **缓存机制**: 缓存搜索结果和处理过的PDF文件
4. **分页加载**: 分页加载搜索结果，减少前端负担

## 未来扩展

1. **多语言支持**: 添加对多语言论文的支持
2. **更多数据源**: 集成更多学术数据库
3. **用户账户系统**: 添加用户账户，保存搜索历史和生成的综述
4. **协作功能**: 添加多用户协作功能，如共享综述和评论
5. **更高级的分析**: 添加更高级的分析功能，如趋势分析和可视化
